{"version":3,"sources":["webpack:///webpack/bootstrap 0719cb7d275c79d95433","webpack:///./src/Img.js","webpack:///./src/FooWorker.js"],"names":["getPixelComponent","imageData","x","y","colorIdx","data","width","putPixel","r","g","b","a","getRect","height","Uint8ClampedArray","row","begin","end","dataRow","slice","offset","set","ImageData","getRow","convertToGrayscale","imgData","w","h","graySum","newImgData","buf","ArrayBuffer","length","buf8","buf32","Uint32Array","col","red","green","blue","gray","parseInt","threshold","gradientSimple","operator","side","Math","round","sqrt","halfSide","floor","dst","tempLine","gradSum","xLeft","max","xRight","min","yUp","yDown","vr","vl","vd","vu","gradX","abs","gradY","gradient","angle","atan","PI","q","push","binarize","value","gradientAndBinarize","gradSobelX","gradientResult","binImgData","module","exports","Img","onmessage","event","console","log","postMessage","type","payload","status"],"mappings":"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","file":"0719cb7d275c79d95433.worker.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 0719cb7d275c79d95433","// image preprocessing functions\r\n\r\nfunction getPixelComponent(imageData, x, y, colorIdx) {\r\n    return imageData.data[(y * imageData.width + x) * 4 + colorIdx];\r\n}\r\nfunction putPixel(imageData, x, y, r, g, b, a) {\r\n    a = a || 255;\r\n    imageData.data[(y * imageData.width + x) * 4 + 0] = r;\r\n    imageData.data[(y * imageData.width + x) * 4 + 1] = g;\r\n    imageData.data[(y * imageData.width + x) * 4 + 2] = b;\r\n    imageData.data[(y * imageData.width + x) * 4 + 3] = a;\r\n}\r\nfunction getRect(imageData, x, y, width, height) {\r\n    let data = new Uint8ClampedArray(width * height * 4);\r\n    for (let row = y; row < y + height; row++ ) {\r\n        const begin = (row * imageData.width + x) * 4;\r\n        const end = begin + (width * 4);\r\n        const dataRow = imageData.data.slice(begin, end)\r\n        const offset = (row - y) * width * 4;\r\n        data.set(dataRow, offset);\r\n    }\r\n    return new ImageData(data, width, height);\r\n}\r\nfunction getRow(imageData, y) {\r\n    const begin = y * imageData.width * 4;\r\n    const end = begin + imageData.width * 4;\r\n    const data = imageData.data.slice(begin, end);\r\n    return new ImageData(data, imageData.width, 1);\r\n}\r\n\r\n/*\r\n * @param imgData: ImageData\r\n */\r\nfunction convertToGrayscale(imgData) {\r\n    const w = imgData.width;\r\n    const h = imgData.height;\r\n    let graySum = 0;\r\n    const newImgData = new ImageData(imgData.width, imgData.height);\r\n    let buf = new ArrayBuffer(newImgData.data.length);\r\n    let buf8 = new Uint8ClampedArray(buf);\r\n    let buf32 = new Uint32Array(buf);\r\n\r\n    for (let row = 0; row < h; row++ ) {\r\n        for (let col = 0; col < w; col++ ) {\r\n            // gray = 0.299*r + 0.587*g + 0.114*b\r\n            const red = getPixelComponent(imgData, col, row, 0),\r\n                green = getPixelComponent(imgData, col, row, 1),\r\n                blue = getPixelComponent(imgData, col, row, 2);\r\n            const gray = parseInt((0.299 * red) + (0.587 * green) + (0.114 * blue));\r\n            // putPixel(newImgData, col, row, gray, gray, gray);\r\n            buf32[row * w + col] =\r\n                (255  << 24) |    // alpha\r\n                (gray << 16) |    // blue\r\n                (gray <<  8) |    // green\r\n                 gray;            // red\r\n            graySum += gray;\r\n        }\r\n    }\r\n    newImgData.data.set(buf8);\r\n\r\n    // return { array: array, threshold: (graySum / (w * h)) };\r\n    return {imgData: newImgData, threshold: (graySum / (w * h)) };\r\n}\r\n\r\nfunction gradientSimple(imgData, operator) {\r\n    // parameters of operator\r\n    const side = Math.round(Math.sqrt(operator.length));\r\n    const halfSide = Math.floor(side / 2);\r\n    // width/height of the image data\r\n    const w = imgData.width;\r\n    const h = imgData.height;\r\n    // destination array for output and temporary arrays for filling\r\n    let dst = [];\r\n    const newImgData = new ImageData(imgData.width, imgData.height);\r\n    let buf = new ArrayBuffer(newImgData.data.length);\r\n    let buf8 = new Uint8ClampedArray(buf);\r\n    let buf32 = new Uint32Array(buf);\r\n\r\n    let tempLine = [];\r\n    // gradient sum\r\n    let gradSum = 0;\r\n\r\n    // parse through all pixels\r\n    for (var y = 0; y < h; y++) {\r\n        tempLine = [];\r\n\r\n        for (var x = 0; x < w; x++) {\r\n            // calculate neighbor pixels, escape out of bounds indexes\r\n            const xLeft = Math.max(0, x - 1);\r\n            const xRight = Math.min(w - 1, x + 1);\r\n            const yUp = Math.max(0, y - 1);\r\n            const yDown = Math.min(h - 1, y + 1);\r\n\r\n            // simple gradient (equation 19, page 49)\r\n            const vr = getPixelComponent(imgData, xRight, y, 0),\r\n                vl = getPixelComponent(imgData, xLeft, y, 0),\r\n                vd = getPixelComponent(imgData, x, yDown, 0),\r\n                vu = getPixelComponent(imgData, x, yUp, 0);\r\n            const gradX = Math.abs(vr - vl);\r\n            const gradY = Math.abs(vd - vu);\r\n            let gradient = parseInt((gradX + gradY) / 2);\r\n            gradSum = gradSum + gradient;\r\n\r\n            // calculate angles\r\n            //let angle = parseInt((Math.atan(gradY / gradX) * 180) / Math.PI);\r\n            let angle = parseInt(((gradX == 0 ? 0 : Math.atan(gradY / gradX)) * 180) / Math.PI);\r\n            let q = (gradX >= 0 && gradY >= 0) ? 1 : -1;\r\n\r\n            // set gradient value for destination pixel\r\n            gradient = Math.abs(gradient);\r\n            // putPixel(newImgData, x, y, gradient, gradient, gradient);\r\n            buf32[y * w + x] =\r\n                (255  << 24) |    // alpha\r\n                (gradient << 16) |    // blue\r\n                (gradient <<  8) |    // green\r\n                 gradient;            // red\r\n\r\n            tempLine.push([angle, q]);\r\n        }\r\n        dst.push(tempLine);\r\n    }\r\n    newImgData.data.set(buf8);\r\n\r\n    return { imgData: newImgData, gradient: dst, threshold: (gradSum / (w * h)) };\r\n}\r\n\r\n/*\r\n * @param imgData: ImageData\r\n * @param threshold: number\r\n */\r\nfunction binarize(imgData, threshold) {\r\n    const w = imgData.width;\r\n    const h = imgData.height;\r\n    const newImgData = new ImageData(imgData.width, imgData.height);\r\n    let buf = new ArrayBuffer(newImgData.data.length);\r\n    let buf8 = new Uint8ClampedArray(buf);\r\n    let buf32 = new Uint32Array(buf);\r\n\r\n    for (let row = 0; row < h; row++ ) {\r\n        for (let col = 0; col < w; col++ ) {\r\n            // gray = 0.299*r + 0.587*g + 0.114*b\r\n            const red = getPixelComponent(imgData, col, row, 0);\r\n            const value = (red >= threshold) ? 255 : 0;\r\n            // putPixel(newImgData, col, row, value, value, value);\r\n            buf32[row * w + col] =\r\n                (255  << 24) |    // alpha\r\n                (value << 16) |    // blue\r\n                (value <<  8) |    // green\r\n                 value;            // red\r\n        }\r\n    }\r\n    newImgData.data.set(buf8);\r\n\r\n    return newImgData;\r\n}\r\n\r\nfunction gradientAndBinarize(imgData, gradSobelX) {\r\n    const gradientResult = gradientSimple(imgData, gradSobelX);\r\n    const binImgData = binarize(gradientResult.imgData, gradientResult.threshold);\r\n\r\n    // image data was transformed, \r\n    // return meta gradient info\r\n    return {imgData: binImgData, gradient: gradientResult.gradient};\r\n}\r\n\r\n// Just return a value to define the module export.\r\n// This example returns an object, but the module\r\n// can return a function as the exported value.\r\nmodule.exports = {\r\n    getRect,\r\n    getRow,\r\n    convertToGrayscale,\r\n    gradientSimple,\r\n    binarize,\r\n    gradientAndBinarize,\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/Img.js","/* eslint-disable no-unused-vars */\r\n/* global self:true */\r\n/* global onmessage:true */\r\n\r\nimport * as Img from './Img'\r\n\r\nonmessage = function (event) {\r\n  console.log(event.data)\r\n}\r\npostMessage({type: 'status', payload: {status: 'ready'}})\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/FooWorker.js"],"sourceRoot":""}